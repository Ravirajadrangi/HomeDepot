library(readr)
install.packages("readr")
library(readr)
install.packages("readr")
library(readr)
cat("Reading data\n")
train <- read_csv('../input/train.csv')
train <- read_csv('F:/Git/Kaggle.HomeDepot/ProjectSearchRelevanceR/input/train.csv')
train <- read_csv('../input/train.csv')
train <- read_csv('..//input/train.csv')
train <- read_csv('../input/train.csv')
train <- read_csv('..input/train.csv')
train <- read_csv('../input/train.csv')
train <- read_csv('F:/Git/Kaggle.HomeDepot/ProjectSearchRelevanceR/input/train.csv')
test <- read_csv('F:/Git/Kaggle.HomeDepot/ProjectSearchRelevanceR/input/test.csv')
desc <- read_csv('F:/Git/Kaggle.HomeDepot/ProjectSearchRelevanceR/input/product_descriptions.csv')
cat("Merge description with train and test data \n")
train <- merge(train,desc, by.x = "product_uid", by.y = "product_uid", all.x = TRUE, all.y = FALSE)
test <- merge(test,desc, by.x = "product_uid", by.y = "product_uid", all.x = TRUE, all.y = FALSE)
train
summary(train)
t <- Sys.time()
word_match <- function(words,title,desc){
n_title <- 0
n_desc <- 0
words <- unlist(strsplit(words," "))
nwords <- length(words)
for(i in 1:length(words)){
pattern <- paste("(^| )",words[i],"($| )",sep="")
n_title <- n_title + grepl(pattern,title,perl=TRUE,ignore.case=TRUE)
n_desc <- n_desc + grepl(pattern,desc,perl=TRUE,ignore.case=TRUE)
}
return(c(n_title,nwords,n_desc))
}
cat("Get number of words and word matching title in train\n")
train_words <- as.data.frame(t(mapply(word_match,train$search_term,train$product_title,train$product_description)))
View(train_words)
library(readr)
cat("Reading data\n")
train <- read_csv('F:/Git/Kaggle.HomeDepot/ProjectSearchRelevanceR/input/train.csv')
test <- read_csv('F:/Git/Kaggle.HomeDepot/ProjectSearchRelevanceR/input/test.csv')
desc <- read_csv('F:/Git/Kaggle.HomeDepot/ProjectSearchRelevanceR/input/product_descriptions.csv')
cat("Merge description with train and test data \n")
train <- merge(train,desc, by.x = "product_uid", by.y = "product_uid", all.x = TRUE, all.y = FALSE)
test <- merge(test,desc, by.x = "product_uid", by.y = "product_uid", all.x = TRUE, all.y = FALSE)
t <- Sys.time()
word_match <- function(words,title,desc){
n_title <- 0
n_desc <- 0
words <- unlist(strsplit(words," "))
nwords <- length(words)
for(i in 1:length(words)){
pattern <- paste("(^| )",words[i],"($| )",sep="")
n_title <- n_title + grepl(pattern,title,perl=TRUE,ignore.case=TRUE)
n_desc <- n_desc + grepl(pattern,desc,perl=TRUE,ignore.case=TRUE)
}
return(c(n_title,nwords,n_desc))
}
cat("Get number of words and word matching title in train\n")
train_words <- as.data.frame(t(mapply(word_match,train$search_term,train$product_title,train$product_description)))
debugSource('F:/Git/Kaggle.HomeDepot/ProjectSearchRelevanceR/benchmarkScore.R')
cat("Get number of words and word matching title in train\n")
train_words <- as.data.frame(t(mapply(word_match,train$search_term,train$product_title,train$product_description)))
cat("Get number of words and word matching title in train\n")
train_words <- as.data.frame(t(mapply(word_match,train$search_term,train$product_title,train$product_description)))
